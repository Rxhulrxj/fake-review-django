<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
   <!-- basic -->
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <!-- mobile metas -->
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="viewport" content="initial-scale=1, maximum-scale=1">
   <!-- site metas -->
   <title>Products</title>
   <meta name="keywords" content="">
   <meta name="description" content="">
   <meta name="author" content="">
   <!-- bootstrap css -->
   <!-- <link rel="stylesheet" href="{% static 'assets1/css/bootstrap.min.css' %}"> -->
   <!-- style css -->
   <link rel="stylesheet" href="{% static 'assets1/css/style.css' %}">
   <!-- Responsive-->
   <link rel="stylesheet" href="{% static 'assets1/css/responsive.css' %}">
   <!-- fevicon -->
   <link rel="icon" href="images/fevicon.png" type="image/gif" />
   <!-- Scrollbar Custom CSS -->
   <link rel="stylesheet" href="{% static 'assets1/css/jquery.mCustomScrollbar.min.css' %}">
   <!-- Tweaks for older IEs-->
   <!-- <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"> -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css"
      media="screen">
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css">
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
   <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css">
   <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
   <style>
      .sm-text {
         font-size: 10px;
         letter-spacing: 1px;
      }

      .sm-text-1 {
         font-size: 14px;
      }

      .green-tab {
         background-color: #00C853;
         color: #fff;
         border-radius: 5px;
         padding: 5px 3px 5px 3px;
      }

      .btn-red {
         background-color: #E64A19;
         color: #fff;
         border-radius: 20px;
         border: none;
         outline: none;
      }

      .btn-red:hover {
         background-color: #BF360C;
      }

      .btn-red:focus {
         -moz-box-shadow: none !important;
         -webkit-box-shadow: none !important;
         box-shadow: none !important;
         outline-width: 0
      }

      .round-icon {
         font-size: 40px;
         padding-bottom: 10px;
      }

      /*Styling for dots*/
      .fa-circle {
         font-size: 10px;
         color: #EEEEEF;
      }

      .green-dot {
         color: #4CAF50;
      }

      .red-dot {
         color: #E64A19;
      }

      .yellow-dot {
         color: #FFD54F;
      }

      .grey-text {
         color: #BDBDBD;
      }

      .green-text {
         color: #4CAF50;
      }

      /*border for block*/
      .block {
         border-right: 1px solid #F5EEEE;
         border-top: 1px solid #F5EEEE;
         border-bottom: 1px solid #F5EEEE;
      }

      .profile-pic img {
         border-radius: 50%;
      }

      .rating-dot {
         letter-spacing: 5px;
      }

      .via {
         border-radius: 20px;
         height: 28px;
      }

      .purchase {
         display: none;
      }
   </style>
</head>
<!-- body -->

<body class="main-layout inner_posituong">
   <!-- loader  -->
   <div class="loader_bg">
      <div class="loader"><img src="{% static 'assets1/images/loading.gif' %}" alt="#" /></div>
   </div>
   <!-- end loader -->
   <!-- header -->
   <header>
      <!-- header inner -->
      <div class="header">
         <div class="container-fluid">
            <div class="row">
               <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col logo_section">
                  <div class="full">
                     <div class="center-desk">
                        <div class="logo">
                           <a href="{% url 'home' %}"><img src="{% static 'images/logo3.png' %}" alt="" /></a>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
                  <nav class="navigation navbar navbar-expand-md navbar-dark ">
                     <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample04"
                        aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                     </button>
                     <div class="collapse navbar-collapse" id="navbarsExample04">
                        <ul class="navbar-nav mr-auto">
                           <li class="nav-item d_none">
                              <nav class="navbar navbar-dark navbar-expand-sm">
                                 <h3 class="navbar-brand">{{ user }}</h3>
                                 <button class="navbar-toggler" type="button" data-toggle="collapse"
                                    data-target="#navbar-list-4" aria-controls="navbarNav" aria-expanded="false"
                                    aria-label="Toggle navigation">
                                    <span class="navbar-toggler-icon"></span>
                                 </button>
                                 <div class="collapse navbar-collapse" id="navbar-list-4">
                                    <ul class="navbar-nav">
                                       <li class="nav-item dropdown">
                                          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink"
                                             role="button" data-toggle="dropdown" aria-haspopup="true"
                                             aria-expanded="false">
                                             <img
                                                src="https://s3.eu-central-1.amazonaws.com/bootstrapbaymisc/blog/24_days_bootstrap/fox.jpg"
                                                width="40" height="40" class="rounded-circle">
                                          </a>
                                          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                             <a class="dropdown-item" href="{% url 'productslist' %}">Products</a>
                                             <a class="dropdown-item" href="{% url 'logout' %}">Log Out</a>
                                          </div>
                                       </li>
                                    </ul>
                                 </div>
                              </nav>
                     </div>
                     </li>
                     </ul>
               </div>
               </nav>
            </div>
         </div>
      </div>
      </div>
   </header>
   <!-- end header inner -->
   <!-- end header -->
   {% for product in products %}
   <div class="laptop1">
      <div class="container">
         <div class="row">
            {% for message in messages %}
            <div class="alert alert-success">{{ message }}</div>
            {% endfor %}

            <div class="col-md-7">
               <div class="text-center">
                  <figure><img src="{{product.product_image.url}}" alt="#" width="150" height="150" /></figure>
               </div>
            </div>
            <div class="col-md-5">
               <div>
                  <h2><strong>{{product.product_name}}</strong></h2>
                  <h3>₹{{product.product_price}}</h3>

                  <button type="button" class="btn btn-primary col-sm-8" data-toggle="modal"
                     data-target="#exampleModal">
                     Buy
                  </button>
                  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                     aria-labelledby="exampleModalLabel" aria-hidden="true">
                     <div class="modal-dialog " role="document">
                        <div class="modal-content">
                           <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel">Payment Page</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                 <span aria-hidden="true">&times;</span>
                              </button>
                           </div>
                           <div class="modal-body" style="height: 105vh;">
                              <article class="card">
                                 <h3>Product Name : {{product.product_name}}</h3>
                                 <h5>Amount : ₹{{product.product_price}}</h5>
                                 <div class="card-body p-5">

                                    <ul class="nav bg-light nav-pills rounded nav-fill mb-3" role="tablist">
                                       <li class="nav-item">
                                          <a class="nav-link active" data-toggle="pill" href="#nav-tab-card">
                                             <i class="fa fa-credit-card"></i> Credit Card/Debit Card</a>
                                       </li>
                                       <li class="nav-item">
                                          <a class="nav-link" data-toggle="pill" href="#nav-tab-paypal">
                                             <i class="far fa-money-bill-alt"></i> Cash on Delivery</a>
                                       </li>
                                    </ul>

                                    <div class="tab-content">
                                       <div class="tab-pane fade show active" id="nav-tab-card">
                                          <form role="form">
                                             <div class="form-group">
                                                <label for="username">Full name (on the card)</label>
                                                <input type="text" class="form-control" name="username" placeholder=""
                                                   id="fullname" required onchange="purchasefn(this.value)"
                                                   onkeypress="return allowOnlyLetters(event,this);">
                                             </div> <!-- form-group.// -->

                                             <div class="form-group">
                                                <label for="cardNumber">Card number</label>
                                                <div class="input-group">
                                                   <input type="number" class="form-control" name="cardNumber"
                                                      placeholder="" id="cardnumber" onchange="purchasefn(this.value)"
                                                      required maxlength="19"
                                                      oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');">
                                                   <div class="input-group-append">
                                                      <span class="input-group-text text-muted">
                                                         <i class="fab fa-cc-visa"></i>   <i class="fab fa-cc-amex"></i>
                                                          
                                                         <i class="fab fa-cc-mastercard"></i>
                                                      </span>
                                                   </div>
                                                </div>
                                             </div> <!-- form-group.// -->

                                             <div class="row">
                                                <div class="col-sm-8">
                                                   <div class="form-group">
                                                      <label><span class="hidden-xs">Expiration</span> </label>
                                                      <div class="input-group">
                                                         <input type="text" class="form-control" placeholder="MM"
                                                            name="" id="month" onchange="purchasefn(this.value)"
                                                            maxlength="2"
                                                            oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');">
                                                         <input type="text" class="form-control" placeholder="YY"
                                                            name="" id="year" onchange="purchasefn(this.value)"
                                                            maxlength="2"
                                                            oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');">
                                                      </div>
                                                   </div>
                                                </div>
                                                <div class="col-sm-4">
                                                   <div class="form-group">
                                                      <label data-toggle="tooltip" title=""
                                                         data-original-title="3 digits code on back side of the card">CVV
                                                         <i class="fa fa-question-circle"></i></label>
                                                      <input type="text" class="form-control" required id="cvvnumber"
                                                         onchange="purchasefn(this.value)" maxlength="3"
                                                         oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');">
                                                   </div> <!-- form-group.// -->
                                                </div>
                                                <div class="col-lg-12">
                                                   <div class="form-group">
                                                      <label data-toggle="tooltip" title=""
                                                         data-original-title="Billing Address to be shipped">Billing
                                                         Address<i class="fa fa-question-circle"></i></label>
                                                      <textarea class="form-control" required id="billing"
                                                         onchange="purchasefn(this.value)"></textarea>
                                                   </div> <!-- form-group.// -->
                                                </div>
                                             </div> <!-- row.// -->
                                          </form>
                                          <form method="post" enctype="multipart/form-data">
                                             {% csrf_token %}
                                             <a href="{% url 'buy' product.product_id %}"
                                                class="subscribe btn btn-primary btn-block mt-5 purchasebtn purchase"
                                                id="purchase">Confirm</a>
                                             <!--  -->
                                          </form>

                                       </div> <!-- tab-pane.// -->
                                       <div class="tab-pane fade" id="nav-tab-paypal">
                                          <form role="form">
                                             <div class="form-group">
                                             </div>
                                             <div class="col-lg-12">
                                                <div class="form-group">
                                                   <label data-toggle="tooltip" title=""
                                                      data-original-title="Billing Address to be shipped">Billing
                                                      Address<i class="fa fa-question-circle"></i></label>
                                                   <textarea class="form-control" id="billingcod" required
                                                      onchange="purchasecod(this.value)"></textarea>
                                                </div> <!-- form-group.// -->
                                             </div>
                                          </form>
                                          <form method="post" enctype="multipart/form-data">
                                             {% csrf_token %}
                                             <a href="{% url 'buy' product.product_id %}"
                                                class="subscribe btn btn-primary btn-block mt-5 purchase"
                                                id="purchasecod">Confirm
                                             </a>
                                          </form>
                                       </div>

                                    </div> <!-- tab-content .// -->

                                 </div> <!-- card-body.// -->
                              </article> <!-- card.// -->


                              </aside> <!-- col.// -->
                           </div> <!-- row.// -->

                        </div>
                        <!--container end.//-->
                     </div>
                  </div>

               </div>
            </div>
         </div>

      </div>

   </div>
   <div class="container">
      <div class="row">
         <div class="text-container text-center">
            <h3 style="text-decoration: underline;">Product Description</h3>
            <h5>{{product.product_description|linebreaks }}</h5>
         </div>
      </div>
   </div>
   <div class="container-fluid px-0 py-5 mx-auto">
      <div class="row justify-content-center mx-0 mx-md-auto">
         <div class="col-lg-10 col-md-11 px-1 px-sm-2">
            <div class="card border-0 px-3">
               <!-- top row -->
               {% if status == "write" %}
               <div class="d-flex row py-5 px-5 bg-light">
                  <div class="ml-md-auto p-2 mx-md-2 pt-4 pt-md-3">
                     <h2>Write a Review</h2>
                     <div class="col-md-12">
                        <form action="" method="post">
                           {% csrf_token %}
                           <textarea class="form-control animated" cols="50" id="new-review" name="comment"
                              placeholder="Enter your review here..." rows="5"></textarea>
                           <div class="text-right">
                              <input type="reset" class="btn btn-danger" value="Cancel">
                              <button class="btn btn-success" type="submit">Submit</button>
                           </div>
                        </form>
                     </div>
                  </div>
               </div>
               {% endif %}
               <!-- Review by user -->
               {% for item in reviews %}
               {% if item.review_status == 'published' %}
               <div class="review p-5">
                  <div class="row d-flex">
                     <div class="profile-pic"><img
                           src="https://s3.eu-central-1.amazonaws.com/bootstrapbaymisc/blog/24_days_bootstrap/fox.jpg"
                           width="60px" height="60px"></div>
                     <div class="d-flex flex-column pl-3">
                        <h4>{{ item.review_by }}</h4>
                        <p class="grey-text">{{ item.review_date }}</p>
                     </div>
                  </div>
                  <div class="row pb-3">
                  </div>
                  <div class="row pb-3">
                     <p>{{ item.review }}</p>
                  </div>
               </div>
               <hr>
               {% endif %}
               {% endfor %}
            </div>
         </div>
      </div>
   </div>
   </div>
   </div>
   {% endfor %}
   </div>

   <!-- end laptop1 -->
   <!-- Javascript files-->
   <script src="{% static 'assets1/js/jquery.min.js' %}"></script>
   <script src="{% static 'assets1/js/popper.min.js' %}"></script>
   <script src="{% static 'assets1/js/bootstrap.bundle.min.js' %}"></script>
   <script src="{% static 'assets1/js/jquery-3.0.0.min.js' %}"></script>
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
   <!-- sidebar -->
   <script src="{% static 'assets1/js/jquery.mCustomScrollbar.concat.min.js' %}"></script>
   <script src="{% static 'assets1/js/custom.js' %}"></script>
   <script>
      function purchasefn() {

         var fullname = document.getElementById("fullname").value;
         var cardnumber = document.getElementById("cardnumber").value;
         var month = document.getElementById('month').value;
         var year = document.getElementById('year').value;
         var cvvnumber = document.getElementById('cvvnumber').value;
         var billing = document.getElementById('billing').value;
         if (fullname.length == 0) {
            var element = document.getElementById("purchase");
            element.classList.add("purchase");
         } else if (cardnumber.length == 0) {
            var element = document.getElementById("purchase");
            element.classList.add("purchase");
         } else if (month.length == 0) {
            var element = document.getElementById("purchase");
            element.classList.add("purchase");
         } else if (year.length == 0) {
            var element = document.getElementById("purchase");
            element.classList.add("purchase");
         } else if (cvvnumber.length == 0) {
            var element = document.getElementById("purchase");
            element.classList.add("purchase");
         } else if (billing.length == 0) {
            var element = document.getElementById("purchase");
            element.classList.add("purchase");
         } else {
            var element = document.getElementById("purchase");
            element.classList.remove("purchase");
         }
      }
      function purchasecod() {
         var billingcod = document.getElementById('billingcod').value
         if (billingcod.length == 0) {
            var element = document.getElementById("purchasecod");
            element.classList.add("purchase");
         } else {
            var element = document.getElementById("purchasecod");
            element.classList.remove("purchase");
         }
      }
      function allowOnlyLetters(e, t) {
         if (window.event) {
            var charCode = window.event.keyCode;
         }
         else if (e) {
            var charCode = e.which;
         }
         else { return true; }
         if ((charCode > 64 && charCode < 91) || (charCode > 96 && charCode < 123))
            return true;
         else {
            return false;
         }
      }      
   </script>
</body>

</html>